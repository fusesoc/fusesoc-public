CAPI=2:

name: iobundle:py2hwsw:iob_cache_iob:0.7.1
license: MIT
description: "IOb-cache is a high-performance, configurable open-source Verilog cache. The original sources for this core and public key signature are available at: https://github.com/IObundle/iob-cache."

filesets:
  rtl:
    files:
      - iob_cache_iob/hardware/src/iob_cache_control.v
      - iob_cache_iob/hardware/src/iob_universal_converter_iob_iob_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_universal_converter_iob_iob.v
      - iob_cache_iob/hardware/src/iob_reg_cae_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_reg_cae.v
      - iob_cache_iob/hardware/src/iob_cache_front_end_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_cache_front_end.v
      - iob_cache_iob/hardware/src/iob_ram_t2p_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_ram_t2p.v
      - iob_cache_iob/hardware/src/iob_reg_car_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_reg_car.v
      - iob_cache_iob/hardware/src/iob_reg_care_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_reg_care.v
      - iob_cache_iob/hardware/src/iob_counter_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_counter.v
      - iob_cache_iob/hardware/src/iob_functions_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_asym_converter_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_asym_converter.v
      - iob_cache_iob/hardware/src/iob_fifo_sync_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_fifo_sync.v
      - iob_cache_iob/hardware/src/iob_ram_sp_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_ram_sp.v
      - iob_cache_iob/hardware/src/iob_regarray_sp_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_regarray_sp.v
      - iob_cache_iob/hardware/src/iob_cache_onehot_to_bin.v
      - iob_cache_iob/hardware/src/iob_cache_gen_sp_ram.v
      - iob_cache_iob/hardware/src/iob_cache_memory.v
      - iob_cache_iob/hardware/src/iob_cache_replacement_policy.v
      - iob_cache_iob/hardware/src/iob_cache_memory_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_cache_back_end_iob.v
      - iob_cache_iob/hardware/src/iob_cache_read_channel_iob.v
      - iob_cache_iob/hardware/src/iob_cache_write_channel_iob.v
      - iob_cache_iob/hardware/src/iob_cache_back_end_iob_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_cache_control_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_reg_ca_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_reg_ca.v
      - iob_cache_iob/hardware/src/iob_reverse_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_reverse.v
      - iob_cache_iob/hardware/src/iob_prio_enc_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_prio_enc.v
      - iob_cache_iob/hardware/src/iob_ctls_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_ctls.v
      - iob_cache_iob/hardware/src/iob_cache_iob_csrs_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_cache_iob_csrs.v
      - iob_cache_iob/hardware/src/iob_coverage_analyze_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_cache_iob_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/src/iob_cache_iob.v
    file_type : verilogSource
  sim:
    files:
      - iob_cache_iob/hardware/simulation/src/iob_tasks_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/simulation/src/iob_ram_sp_be_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/simulation/src/iob_ram_sp_be.v
      - iob_cache_iob/hardware/simulation/src/iob_uut_conf.vh: {is_include_file : true}
      - iob_cache_iob/hardware/simulation/src/iob_uut.v
      - iob_cache_iob/hardware/simulation/src/iob_v_tb.v
      - iob_cache_iob/hardware/simulation/src/iob_v_tb.vh: {is_include_file : true}
    file_type : verilogSource
  scripts:
    files:
      - iob_cache_iob/scripts/iob_cov_analyze.py
      - iob_cache_iob/scripts/iob_colors.py
      - iob_cache_iob/scripts/board_client.py
      - iob_cache_iob/scripts/console.py
      - iob_cache_iob/scripts/console_ethernet.py
      - iob_cache_iob/scripts/makehex.py
      - iob_cache_iob/scripts/hex_join.py
      - iob_cache_iob/scripts/fix_doxygen_subsections.py
  sw:
    files:
      - iob_cache_iob/config_build.mk
      - iob_cache_iob/software/Makefile
      - iob_cache_iob/software/sw_build.mk
      - iob_cache_iob/software/src/iob_universal_converter_iob_iob_conf.h
      - iob_cache_iob/software/src/iob_ram_t2p_conf.h
      - iob_cache_iob/software/src/iob_functions_conf.h
      - iob_cache_iob/software/src/iob_asym_converter_conf.h
      - iob_cache_iob/software/src/iob_ram_sp_conf.h
      - iob_cache_iob/software/src/iob_regarray_sp_conf.h
      - iob_cache_iob/software/src/iob_cache_control_conf.h
      - iob_cache_iob/software/src/iob_reverse_conf.h
      - iob_cache_iob/software/src/iob_prio_enc_conf.h
      - iob_cache_iob/software/src/iob_ctls_conf.h
      - iob_cache_iob/software/src/iob_coverage_analyze_conf.h
      - iob_cache_iob/software/src/iob_c_tb.c
      - iob_cache_iob/software/src/iob_vlt_tb.cpp
      - iob_cache_iob/software/src/iob_cache_iob_csrs_pc_emul.c
      - iob_cache_iob/software/src/iob_cache_iob_csrs.h
      - iob_cache_iob/software/src/iob_cache_iob_csrs.c
      - iob_cache_iob/software/src/iob_reg_cae_conf.h
      - iob_cache_iob/software/src/iob_cache_front_end_conf.h
      - iob_cache_iob/software/src/iob_reg_car_conf.h
      - iob_cache_iob/software/src/iob_reg_care_conf.h
      - iob_cache_iob/software/src/iob_counter_conf.h
      - iob_cache_iob/software/src/iob_fifo_sync_conf.h
      - iob_cache_iob/software/src/iob_cache_memory_conf.h
      - iob_cache_iob/software/src/iob_cache_back_end_iob_conf.h
      - iob_cache_iob/software/src/iob_reg_ca_conf.h
      - iob_cache_iob/software/src/iob_cache_iob_csrs_conf.h
      - iob_cache_iob/software/src/hw_driver.c
      - iob_cache_iob/software/src/iob_core_tb.c
      - iob_cache_iob/software/src/iob_cache_iob_conf.h
      - iob_cache_iob/software/simulation/src/iob_tasks_conf.h
      - iob_cache_iob/software/simulation/src/iob_universal_converter_iob_iob_conf.h
      - iob_cache_iob/software/simulation/src/iob_ram_sp_conf.h
      - iob_cache_iob/software/simulation/src/iob_ram_sp_be_conf.h
      - iob_cache_iob/software/simulation/src/iob_reg_ca_conf.h
      - iob_cache_iob/software/simulation/src/iob_uut_conf.h
      - iob_cache_iob/software/zynq_ps/Makefile
      - iob_cache_iob/software/zynq_ps/lscript.ld
      - iob_cache_iob/software/zynq_ps/prog.tcl
      - iob_cache_iob/software/zynq_ps/sw_build.tcl
      - iob_cache_iob/software/zynq_ps/src/main.c


targets:
  default:
    toplevel: iob_v_tb
    description: Simulate the design.
    # Generic flow only runs the build step by default.
    flow: generic
    flow_options:
      tool: icarus
      iverilog_options:
        - -W
        - all
        - -g2005-sv
    filesets:
      - rtl
      - sim
    hooks:
      post_build:
        - sw_build
        - clean
        - board_client

scripts:
  clean:
    cmd:
      - rm
      - -f
      - c2v.txt
      - v2c.txt


  sw_build:
    cmd:
      - make
      - -C
      - src/iobundle_py2hwsw_iob_cache_iob_0.7.1/iob_cache_iob/software
      - build
      #- USE_FPGA=$(USE_FPGA)
    filesets:
      - sw

  board_client:
    cmd:
      - src/iobundle_py2hwsw_iob_cache_iob_0.7.1/iob_cache_iob/scripts/board_client.py
      - grab
      - "300"
      - -s
      #run the C testbench in background and kill it when simulator exits
      - "'./src/iobundle_py2hwsw_iob_cache_iob_0.7.1/iob_cache_iob/software/tb & make run && (kill $$! >/dev/null 2>&1; true) || (kill $$! >/dev/null 2>&1; false)'"
    filesets:
      - scripts

provider:
  name: github
  user: IObundle
  repo: iob-cache-fs
  version: 49d0032a2e734d61c4c546a60556d49fe2c49bfc
